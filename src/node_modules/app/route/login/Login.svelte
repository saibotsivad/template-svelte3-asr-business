<script>
import { createEventDispatcher } from 'svelte'
import Button from 'app/element/Button.svelte'
import Card from 'app/element/Card.svelte'
import Container from 'app/element/Container.svelte'
import LabelInputText from 'app/element/LabelInputText.svelte'

export let asr = {}
export let error = ''

let password = ''
let username = ''

const dispatch = createEventDispatcher()
const login = () => {
	dispatch('login', { username, password })
}
</script>

<div class="container">
	<div class="row justify-content-md-center">
		<div class="col-md-auto">
			<div class="card" style="margin-top: 3rem;">
				<div class="card-header">
				Log In
				</div>
				<div class="card-body">
					<p>
						Enter your username and password to log in.
					</p>
					<form
						on:submit|preventDefault={login}
					>
						<div class="form-group">
							<label for="email">
								Email address
							</label>
							<input
								type="email"
								class="form-control"
								id="email"
								aria-describedby="emailHelp"
								placeholder="Enter email"
								bind:value={username}
							>
							<small id="emailHelp" class="form-text text-muted">
								The username or email address associated with your account.
							</small>
						</div>
						<div class="form-group">
							<label for="password">
								Password
							</label>
							<input
								type="password"
								class="form-control"
								id="password"
								placeholder="Password"
								bind:value={password}
							>
						</div>
						{#if error}
							<div class="alert alert-warning" role="alert">
								Could not log in. Check your username and password?
							</div>
						{/if}
						<button
							type="submit"
							class="btn btn-primary"
						>
							Submit
						</button>
						<small>
							<a
								href="{asr.makePath('password-reset', { username })}"
								style="margin-left: 2rem;"
							>
								Forgot your password?
							</a>
						</small>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>
