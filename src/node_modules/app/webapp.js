import makeSvelteStateRenderer from 'svelte-state-renderer'
import StateRouter from 'abstract-state-router'

import globbedRoutes from './globbed-routes.js'

const defaultParameters = {
	props: {
		annoy() {
			alert('Modal dialogs are annoying')
		}
	}
}

const renderer = makeSvelteStateRenderer(defaultParameters)
const asr = StateRouter(renderer, document.body)

globbedRoutes.forEach(route => route({ asr }))

// If there is no route specified in the URL, send them
// to the login page first. You might have a different
// first-load view, such as some unsecured dashboard, that
// you would like to use instead.
asr.evaluateCurrentRoute('login')

export default asr
